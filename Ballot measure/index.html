<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ballot Measures Dashboard</title>
    <style>
        :root {
            --color-cream-50: rgba(252, 252, 249, 1);
            --color-cream-100: rgba(255, 255, 253, 1);
            --color-slate-900: rgba(19, 52, 59, 1);
            --color-slate-500: rgba(98, 108, 113, 1);
            --color-teal-500: rgba(33, 128, 141, 1);
            --color-teal-600: rgba(29, 116, 128, 1);
            --color-teal-300: rgba(50, 184, 198, 1);
            --color-brown-600-rgb: 94, 82, 64;
            --color-charcoal-700: rgba(31, 33, 33, 1);
            --color-charcoal-800: rgba(38, 40, 40, 1);
            --color-gray-200: rgba(245, 245, 245, 1);
            --color-gray-300: rgba(167, 169, 169, 1);
            --color-gray-400-rgb: 119, 124, 124;
            
            --color-background: var(--color-cream-50);
            --color-surface: var(--color-cream-100);
            --color-text: var(--color-slate-900);
            --color-text-secondary: var(--color-slate-500);
            --color-primary: var(--color-teal-500);
            --color-primary-hover: var(--color-teal-600);
            --color-border: rgba(var(--color-brown-600-rgb), 0.2);
            --color-card-border: rgba(var(--color-brown-600-rgb), 0.12);
            
            --font-family-base: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            --radius-base: 8px;
            --radius-lg: 12px;
            --space-8: 8px;
            --space-12: 12px;
            --space-16: 16px;
            --space-20: 20px;
            --space-24: 24px;
            --space-32: 32px;
            --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.04), 0 1px 2px rgba(0, 0, 0, 0.02);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.04), 0 2px 4px -1px rgba(0, 0, 0, 0.02);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --color-background: var(--color-charcoal-700);
                --color-surface: var(--color-charcoal-800);
                --color-text: var(--color-gray-200);
                --color-text-secondary: rgba(var(--color-gray-300), 0.7);
                --color-primary: var(--color-teal-300);
                --color-border: rgba(var(--color-gray-400-rgb), 0.3);
                --color-card-border: rgba(var(--color-gray-400-rgb), 0.2);
            }
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: var(--font-family-base);
            background: var(--color-background);
            color: var(--color-text);
            line-height: 1.6;
            padding: var(--space-20);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            margin-bottom: var(--space-32);
        }

        h1 {
            font-size: 2rem;
            font-weight: 600;
            margin-bottom: var(--space-8);
            color: var(--color-text);
        }

        .subtitle {
            color: var(--color-text-secondary);
            font-size: 1rem;
        }

        .tabs {
            display: flex;
            gap: var(--space-8);
            margin-bottom: var(--space-24);
            border-bottom: 1px solid var(--color-border);
            overflow-x: auto;
        }

        .tab {
            padding: var(--space-12) var(--space-20);
            background: none;
            border: none;
            border-bottom: 2px solid transparent;
            color: var(--color-text-secondary);
            cursor: pointer;
            font-size: 0.95rem;
            font-weight: 500;
            transition: all 0.2s;
            white-space: nowrap;
        }

        .tab:hover {
            color: var(--color-text);
        }

        .tab.active {
            color: var(--color-primary);
            border-bottom-color: var(--color-primary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card {
            background: var(--color-surface);
            border: 1px solid var(--color-card-border);
            border-radius: var(--radius-lg);
            padding: var(--space-24);
            margin-bottom: var(--space-20);
            box-shadow: var(--shadow-sm);
        }

        .card h2 {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: var(--space-16);
            color: var(--color-text);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--space-16);
            margin-bottom: var(--space-24);
        }

        .stat-card {
            background: var(--color-surface);
            border: 1px solid var(--color-card-border);
            border-radius: var(--radius-base);
            padding: var(--space-20);
            box-shadow: var(--shadow-sm);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--color-primary);
            margin-bottom: var(--space-8);
        }

        .stat-label {
            color: var(--color-text-secondary);
            font-size: 0.875rem;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: var(--space-12);
            text-align: left;
            border-bottom: 1px solid var(--color-border);
        }

        th {
            font-weight: 600;
            color: var(--color-text);
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        td {
            color: var(--color-text-secondary);
        }

        tr:hover {
            background: rgba(var(--color-brown-600-rgb), 0.03);
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--color-border);
            border-radius: 4px;
            overflow: hidden;
            margin-top: var(--space-8);
        }

        .progress-fill {
            height: 100%;
            background: var(--color-primary);
            transition: width 0.3s ease;
        }

        .chart-container {
            margin-top: var(--space-16);
            padding: var(--space-16);
            background: var(--color-surface);
            border-radius: var(--radius-base);
        }

        .bar-chart {
            display: flex;
            align-items: flex-end;
            gap: var(--space-12);
            height: 200px;
            padding: var(--space-16) 0;
        }

        .bar {
            flex: 1;
            background: var(--color-primary);
            border-radius: 4px 4px 0 0;
            position: relative;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .bar:hover {
            opacity: 0.8;
        }

        .bar-label {
            position: absolute;
            bottom: -24px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.75rem;
            color: var(--color-text-secondary);
            white-space: nowrap;
        }

        .bar-value {
            position: absolute;
            top: -24px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--color-text);
        }

        .issue-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--space-12) 0;
            border-bottom: 1px solid var(--color-border);
        }

        .issue-item:last-child {
            border-bottom: none;
        }

        .issue-name {
            font-weight: 500;
            color: var(--color-text);
        }

        .issue-count {
            color: var(--color-primary);
            font-weight: 600;
        }

        @media (max-width: 768px) {
            body {
                padding: var(--space-16);
            }

            h1 {
                font-size: 1.5rem;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            table {
                font-size: 0.875rem;
            }

            th, td {
                padding: var(--space-8);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Ballot Measures Dashboard</h1>
            <p class="subtitle">Citizen-Led Direct Democracy in America (2000-2024)</p>
        </header>

        <div class="tabs">
            <button class="tab active" onclick="switchTab('overview')">Overview</button>
            <button class="tab" onclick="switchTab('trends')">Historical Trends</button>
            <button class="tab" onclick="switchTab('issues')">By Issue</button>
            <button class="tab" onclick="switchTab('spending')">Campaign Spending</button>
            <button class="tab" onclick="switchTab('success')">Success Rates</button>
        </div>

        <div id="overview" class="tab-content active">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value">2,216</div>
                    <div class="stat-label">Total Statewide Measures (2000-2024)</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">820</div>
                    <div class="stat-label">Citizen Initiatives (2000-2023)</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">64%</div>
                    <div class="stat-label">Recent Success Rate (2020-2023)</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">$1.32B</div>
                    <div class="stat-label">Campaign Spending (2024)</div>
                </div>
            </div>

            <div class="card">
                <h2>About This Dashboard</h2>
                <p style="color: var(--color-text-secondary); line-height: 1.8;">
                    This dashboard tracks citizen-led ballot measures across the United States from 2000 to 2024. 
                    Ballot initiatives have become a crucial mechanism for direct democracy, allowing citizens to 
                    bypass legislative gridlock on issues like marijuana legalization, abortion rights, minimum wage 
                    increases, and election reforms. Explore the data to understand how direct democracy functions 
                    as a pressure valve in polarized American politics.
                </p>
            </div>

            <div class="card">
                <h2>Key Findings</h2>
                <ul style="color: var(--color-text-secondary); line-height: 2; padding-left: var(--space-20);">
                    <li>Initiative success rates increased from 41% (2000-2009) to 64% (2020-2023)</li>
                    <li>Abortion rights measures passed in 7 of 10 states in 2024 (70% success rate)</li>
                    <li>Minimum wage and paid sick leave measures consistently achieve 75-80% approval</li>
                    <li>Campaign spending reached record levels: $1.32 billion in 2024 alone</li>
                    <li>26 states plus D.C. allow citizen-initiated ballot measures</li>
                </ul>
            </div>
        </div>

        <div id="trends" class="tab-content">
            <div class="card">
                <h2>Statewide Ballot Measures by Year (2000-2024)</h2>
                <div class="chart-container">
                    <div class="bar-chart" id="yearlyChart"></div>
                </div>
            </div>

            <div class="card">
                <h2>Detailed Year-by-Year Data</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Year</th>
                            <th>Total Measures</th>
                            <th>Approved</th>
                            <th>Defeated</th>
                            <th>Approval Rate</th>
                        </tr>
                    </thead>
                    <tbody id="yearlyTableBody"></tbody>
                </table>
            </div>

            <div class="card">
                <h2>Citizen Initiatives by Decade</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Decade</th>
                            <th>Total Initiatives</th>
                            <th>Approved</th>
                            <th>Approval Rate</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>2000-2009</td>
                            <td>410</td>
                            <td>169</td>
                            <td><strong>41%</strong></td>
                        </tr>
                        <tr>
                            <td>2010-2019</td>
                            <td>326</td>
                            <td>161</td>
                            <td><strong>49%</strong></td>
                        </tr>
                        <tr>
                            <td>2020-2023</td>
                            <td>84</td>
                            <td>54</td>
                            <td><strong>64%</strong></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div id="issues" class="tab-content">
            <div class="card">
                <h2>2024 Ballot Measures by Issue Category</h2>
                <div id="issuesContainer"></div>
            </div>

            <div class="card">
                <h2>Notable Issue-Specific Campaigns (2016-2024)</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Issue</th>
                            <th>Success Pattern</th>
                            <th>Notable Examples</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Abortion Rights</td>
                            <td>7 of 10 states passed (70%)</td>
                            <td>Ohio, Missouri, Arizona (2023-2024)</td>
                        </tr>
                        <tr>
                            <td>Minimum Wage</td>
                            <td>75-80% approval rate</td>
                            <td>Alaska, Missouri ($15 minimum)</td>
                        </tr>
                        <tr>
                            <td>Medical Marijuana</td>
                            <td>67% in red states</td>
                            <td>Montana, South Dakota, Arkansas</td>
                        </tr>
                        <tr>
                            <td>Recreational Marijuana</td>
                            <td>50-60% overall</td>
                            <td>Arizona, Montana, New Jersey</td>
                        </tr>
                        <tr>
                            <td>Paid Sick Leave</td>
                            <td>74-75% approval</td>
                            <td>Alaska, Missouri, Nebraska</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div id="spending" class="tab-content">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value">$1.32B</div>
                    <div class="stat-label">2024 Total Spending</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">$8.3M</div>
                    <div class="stat-label">Average Per Measure (2024)</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">$392.7M</div>
                    <div class="stat-label">California Spending (2024)</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">$186.6M</div>
                    <div class="stat-label">Most Expensive (FL Amendment 3)</div>
                </div>
            </div>

            <div class="card">
                <h2>Campaign Spending Trends (2020-2024)</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Year</th>
                            <th>Total Spending</th>
                            <th>Number of Measures</th>
                            <th>Avg Per Measure</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>2020</td>
                            <td>$1.21 billion</td>
                            <td>129</td>
                            <td>$9.4 million</td>
                        </tr>
                        <tr>
                            <td>2022</td>
                            <td>$1.10 billion</td>
                            <td>140</td>
                            <td>$7.9 million</td>
                        </tr>
                        <tr>
                            <td>2024</td>
                            <td>$1.32 billion</td>
                            <td>159</td>
                            <td>$8.3 million</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="card">
                <h2>Top Spending by State (2024)</h2>
                <div id="stateSpendingContainer"></div>
            </div>
        </div>

        <div id="success" class="tab-content">
            <div class="card">
                <h2>Success Rates by Issue Category</h2>
                <div style="margin-top: var(--space-16);">
                    <div style="margin-bottom: var(--space-24);">
                        <div style="display: flex; justify-content: space-between; margin-bottom: var(--space-8);">
                            <span style="font-weight: 500;">Abortion Rights (Pro-Access)</span>
                            <span style="color: var(--color-primary); font-weight: 600;">70%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 70%;"></div>
                        </div>
                    </div>
                    <div style="margin-bottom: var(--space-24);">
                        <div style="display: flex; justify-content: space-between; margin-bottom: var(--space-8);">
                            <span style="font-weight: 500;">Minimum Wage Increases</span>
                            <span style="color: var(--color-primary); font-weight: 600;">78%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 78%;"></div>
                        </div>
                    </div>
                    <div style="margin-bottom: var(--space-24);">
                        <div style="display: flex; justify-content: space-between; margin-bottom: var(--space-8);">
                            <span style="font-weight: 500;">Paid Sick Leave</span>
                            <span style="color: var(--color-primary); font-weight: 600;">75%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 75%;"></div>
                        </div>
                    </div>
                    <div style="margin-bottom: var(--space-24);">
                        <div style="display: flex; justify-content: space-between; margin-bottom: var(--space-8);">
                            <span style="font-weight: 500;">Medical Marijuana (Red States)</span>
                            <span style="color: var(--color-primary); font-weight: 600;">67%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 67%;"></div>
                        </div>
                    </div>
                    <div style="margin-bottom: var(--space-24);">
                        <div style="display: flex; justify-content: space-between; margin-bottom: var(--space-8);">
                            <span style="font-weight: 500;">Recreational Marijuana</span>
                            <span style="color: var(--color-primary); font-weight: 600;">55%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 55%;"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2>Approval Rate Evolution</h2>
                <p style="color: var(--color-text-secondary); margin-bottom: var(--space-16);">
                    Initiative success rates have steadily increased over the past two decades, suggesting more 
                    sophisticated campaigns and better alignment with voter preferences.
                </p>
                <div class="chart-container">
                    <div class="bar-chart" id="approvalChart"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Data
        const yearlyData = [
            { year: 2000, total: 204, approved: 101, defeated: 103, rate: 49.5 },
            { year: 2002, total: 202, approved: 107, defeated: 95, rate: 53.0 },
            { year: 2004, total: 162, approved: 92, defeated: 70, rate: 56.8 },
            { year: 2006, total: 205, approved: 118, defeated: 87, rate: 57.6 },
            { year: 2008, total: 153, approved: 85, defeated: 68, rate: 55.6 },
            { year: 2010, total: 184, approved: 116, defeated: 50, rate: 63.0 },
            { year: 2012, total: 186, approved: null, defeated: null, rate: null },
            { year: 2014, total: 158, approved: null, defeated: null, rate: null },
            { year: 2016, total: 167, approved: null, defeated: null, rate: null },
            { year: 2018, total: 167, approved: 116, defeated: 50, rate: 69.5 },
            { year: 2020, total: 129, approved: null, defeated: null, rate: null },
            { year: 2022, total: 140, approved: 96, defeated: 44, rate: 68.6 },
            { year: 2024, total: 159, approved: 102, defeated: 57, rate: 64.2 }
        ];

        const issuesData = [
            { name: 'Election/Voting Rights', count: 15 },
            { name: 'Abortion/Reproductive Rights', count: 10 },
            { name: 'Direct Democracy Restrictions', count: 6 },
            { name: 'Marijuana/Cannabis', count: 5 },
            { name: 'Minimum Wage/Economic Justice', count: 5 },
            { name: 'Other', count: 118 }
        ];

        const stateSpending = [
            { state: 'California', amount: 392.7 },
            { state: 'Florida', amount: 315.4 },
            { state: 'Missouri', amount: 108.4 },
            { state: 'Washington', amount: 57.6 },
            { state: 'Arizona', amount: 54.8 }
        ];

        // Tab switching
        function switchTab(tabName) {
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');
        }

        // Render yearly chart
        function renderYearlyChart() {
            const container = document.getElementById('yearlyChart');
            const maxTotal = Math.max(...yearlyData.map(d => d.total));
            
            yearlyData.forEach(data => {
                const bar = document.createElement('div');
                bar.className = 'bar';
                const height = (data.total / maxTotal) * 100;
                bar.style.height = height + '%';
                
                const label = document.createElement('div');
                label.className = 'bar-label';
                label.textContent = data.year;
                
                const value = document.createElement('div');
                value.className = 'bar-value';
                value.textContent = data.total;
                
                bar.appendChild(label);
                bar.appendChild(value);
                container.appendChild(bar);
            });
        }

        // Render yearly table
        function renderYearlyTable() {
            const tbody = document.getElementById('yearlyTableBody');
            
            yearlyData.forEach(data => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${data.year}</td>
                    <td>${data.total}</td>
                    <td>${data.approved !== null ? data.approved : 'N/A'}</td>
                    <td>${data.defeated !== null ? data.defeated : 'N/A'}</td>
                    <td><strong>${data.rate !== null ? data.rate + '%' : 'N/A'}</strong></td>
                `;
                tbody.appendChild(row);
            });
        }

        // Render issues
        function renderIssues() {
            const container = document.getElementById('issuesContainer');
            
            issuesData.forEach(issue => {
                const item = document.createElement('div');
                item.className = 'issue-item';
                item.innerHTML = `
                    <span class="issue-name">${issue.name}</span>
                    <span class="issue-count">${issue.count} measures</span>
                `;
                container.appendChild(item);
            });
        }

        // Render state spending
        function renderStateSpending() {
            const container = document.getElementById('stateSpendingContainer');
            const maxSpending = Math.max(...stateSpending.map(s => s.amount));
            
            stateSpending.forEach(state => {
                const item = document.createElement('div');
                item.style.marginBottom = 'var(--space-16)';
                
                const header = document.createElement('div');
                header.style.display = 'flex';
                header.style.justifyContent = 'space-between';
                header.style.marginBottom = 'var(--space-8)';
                header.innerHTML = `
                    <span style="font-weight: 500;">${state.state}</span>
                    <span style="color: var(--color-primary); font-weight: 600;">$${state.amount}M</span>
                `;
                
                const progressBar = document.createElement('div');
                progressBar.className = 'progress-bar';
                
                const progressFill = document.createElement('div');
                progressFill.className = 'progress-fill';
                progressFill.style.width = ((state.amount / maxSpending) * 100) + '%';
                
                progressBar.appendChild(progressFill);
                item.appendChild(header);
                item.appendChild(progressBar);
                container.appendChild(item);
            });
        }

        // Render approval rate chart
        function renderApprovalChart() {
            const container = document.getElementById('approvalChart');
            const decades = [
                { label: '2000-2009', rate: 41 },
                { label: '2010-2019', rate: 49 },
                { label: '2020-2023', rate: 64 }
            ];
            
            const maxRate = 100;
            
            decades.forEach(decade => {
                const bar = document.createElement('div');
                bar.className = 'bar';
                const height = (decade.rate / maxRate) * 100;
                bar.style.height = height + '%';
                
                const label = document.createElement('div');
                label.className = 'bar-label';
                label.textContent = decade.label;
                
                const value = document.createElement('div');
                value.className = 'bar-value';
                value.textContent = decade.rate + '%';
                
                bar.appendChild(label);
                bar.appendChild(value);
                container.appendChild(bar);
            });
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            renderYearlyChart();
            renderYearlyTable();
            renderIssues();
            renderStateSpending();
            renderApprovalChart();
        });
    </script>
</body>
</html>
